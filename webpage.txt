pipeline {
    agent {
        label 'node'
    }
    stages {
        stage('Install Apache2') {
            steps {
                sh '''
                    sudo apt update
                    sudo apt-get install apache2 -y
                    sudo systemctl start apache2
                '''
            }
        }
        stage('Download Website Files') {
            steps {
                sh 'wget https://www.free-css.com/assets/files/free-css-templates/download/page296/oxer.zip'
            }
        }
        stage('Extract Website Files') {
            steps {
                sh '''
                    sudo apt-get install zip -y
                    sudo unzip oxer.zip
                '''
            }
        }
        stage('Copy Files to Web Directory') {
            steps {
                sh 'sudo cp -r /home/ubuntu/workspace/webpage@2/oxer-html/* /var/www/html/'
            }
        }
        stage('Restart Apache') {
            steps {
                sh 'sudo systemctl restart apache2'
            }
        }
    }
}
